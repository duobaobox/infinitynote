# æ— é™ä¾¿ç­¾ v2.0.0 å‘ç‰ˆæŒ‡å—

## ğŸ“‹ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šå…¨è‡ªåŠ¨å‘ç‰ˆï¼ˆæ¨èï¼‰âœ¨

1. **æ‰“å¼€ç»ˆç«¯**ï¼Œè¿›å…¥é¡¹ç›®ç›®å½•ï¼š

```bash
cd /Users/duobao/ä¸ªäºº/infinitynotev2/infinitynote
```

2. **æ‰§è¡Œå‘ç‰ˆè„šæœ¬**ï¼š

```bash
bash scripts/release.sh
```

3. **æŒ‰æç¤ºæ“ä½œ**ï¼š
   - è„šæœ¬ä¼šå¼•å¯¼ä½ è·å– GitHub Token
   - è‡ªåŠ¨å®Œæˆæ„å»ºã€æ‰“åŒ…ã€å‘å¸ƒæ‰€æœ‰æµç¨‹

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨æ­¥éª¤ï¼ˆå¦‚éœ€ç»†ç²’åº¦æ§åˆ¶ï¼‰

## ğŸ”‘ è·å– GitHub Token

### æ­¥éª¤ 1ï¼šæ‰“å¼€ GitHub Settings

è®¿é—®ï¼šhttps://github.com/settings/tokens/new

### æ­¥éª¤ 2ï¼šé…ç½® Token

- **Token name**: `infinitynote-release`
- **Expiration**: `90 days`
- **Select scopes**: å‹¾é€‰ `repo` (å®Œå…¨è®¿é—®ç§ä»“å’Œå…¬ä»“æƒé™)

### æ­¥éª¤ 3ï¼šç”Ÿæˆå¹¶å¤åˆ¶

- ç‚¹å‡» "Generate token"
- å¤åˆ¶æ˜¾ç¤ºçš„ Tokenï¼ˆä»…æ˜¾ç¤ºä¸€æ¬¡ï¼ï¼‰

### æ­¥éª¤ 4ï¼šè®¾ç½®ç¯å¢ƒå˜é‡

#### macOS/Linuxï¼š

```bash
export GH_TOKEN='ç²˜è´´ä½ çš„token'
```

#### Windows (PowerShell)ï¼š

```powershell
$env:GH_TOKEN = 'ç²˜è´´ä½ çš„token'
```

#### Windows (CMD)ï¼š

```cmd
set GH_TOKEN=ç²˜è´´ä½ çš„token
```

### éªŒè¯ Token

```bash
echo $GH_TOKEN  # macOS/Linux
echo %GH_TOKEN%  # Windows CMD
```

## ğŸš€ æ‰‹åŠ¨å‘ç‰ˆæ­¥éª¤

### æ­¥éª¤ 1ï¼šæ¸…ç†æ—§æ–‡ä»¶

```bash
rm -rf dist release
mkdir -p release
```

### æ­¥éª¤ 2ï¼šé…ç½®é•œåƒï¼ˆå¯é€‰ï¼ŒåŠ é€Ÿä¸‹è½½ï¼‰

```bash
export ELECTRON_MIRROR="https://npmmirror.com/mirrors/electron/"
export ELECTRON_BUILDER_BINARIES_MIRROR="https://npmmirror.com/mirrors/electron-builder-binaries/"
```

### æ­¥éª¤ 3ï¼šæ„å»ºå‰ç«¯

```bash
npm run build
```

### æ­¥éª¤ 4ï¼šæ‰“åŒ…æ‰€æœ‰å¹³å°

#### åªæ‰“åŒ…ï¼Œä¸å‘å¸ƒï¼š

```bash
npx electron-builder --mac --win --linux --publish never
```

#### æ‰“åŒ…å¹¶å‘å¸ƒåˆ° GitHubï¼š

```bash
export GH_TOKEN='ä½ çš„token'
npx electron-builder --mac --win --linux --publish always
```

#### åˆ†åˆ«æ‰“åŒ…å„å¹³å°ï¼š

```bash
# macOS (Intel + Apple Silicon)
npx electron-builder --mac

# Windows (x64 + ia32)
npx electron-builder --win

# Linux (AppImage + deb + rpm)
npx electron-builder --linux
```

### æ­¥éª¤ 5ï¼šéªŒè¯å‘è¡Œæ–‡ä»¶

```bash
ls -lh release/
```

åº”è¯¥çœ‹åˆ°ä»¥ä¸‹æ–‡ä»¶ï¼š

- âœ… macOS: `æ— é™ä¾¿ç­¾-2.0.0.dmg`, `æ— é™ä¾¿ç­¾-2.0.0.zip` ç­‰
- âœ… Windows: `æ— é™ä¾¿ç­¾-2.0.0.exe`, `æ— é™ä¾¿ç­¾-2.0.0-win.zip` ç­‰
- âœ… Linux: `æ— é™ä¾¿ç­¾-2.0.0.AppImage`, `æ— é™ä¾¿ç­¾-2.0.0.deb`, `æ— é™ä¾¿ç­¾-2.0.0.rpm`

## ğŸ“ å‘å¸ƒåˆ° GitHub Release

### è‡ªåŠ¨å‘å¸ƒ

å¦‚æœä½¿ç”¨äº† `--publish always`ï¼Œæ–‡ä»¶ä¼šè‡ªåŠ¨ä¸Šä¼ åˆ° GitHub Releaseã€‚

### æ‰‹åŠ¨å‘å¸ƒ

1. è®¿é—®ï¼šhttps://github.com/duobaobox/infinitynote/releases
2. åˆ›å»ºæ–° Releaseï¼š
   - **Tag**: `v2.0.0`
   - **Title**: `v2.0.0 - æ— é™ä¾¿ç­¾`
   - **Description**: å¤åˆ¶ CHANGELOG.md ä¸­çš„å†…å®¹
3. ä¸Šä¼ å‘è¡Œæ–‡ä»¶ï¼ˆrelease ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼‰
4. ç‚¹å‡» "Publish release"

## âš™ï¸ é…ç½®æ–‡ä»¶è¯´æ˜

### electron-builder.json

- **appId**: `com.infinitynote.app`
- **productName**: `æ— é™ä¾¿ç­¾`
- **publish**: GitHub å‘å¸ƒé…ç½®
  - owner: `duobaobox`
  - repo: `infinitynote`
  - releaseType: `draft` (è‰ç¨¿ï¼Œéœ€æ‰‹åŠ¨å‘å¸ƒ)

### package.json å‘ç‰ˆç›¸å…³è„šæœ¬

```json
{
  "scripts": {
    "electron:build": "npm run build && electron-builder",
    "electron:build:mac": "npm run build && electron-builder --mac",
    "electron:build:win": "npm run build && electron-builder --win",
    "electron:build:linux": "npm run build && electron-builder --linux",
    "electron:build:all": "bash scripts/build.sh"
  }
}
```

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šGH_TOKEN æ— æ•ˆ

- âŒ Token å·²è¿‡æœŸæˆ–è¢«æ’¤é”€
- âœ… é‡æ–°ç”Ÿæˆä¸€ä¸ªæ–° Token

### é—®é¢˜ 2ï¼šæ‰“åŒ…å¤±è´¥ - Electron ä¸‹è½½æ…¢

- âœ… è®¾ç½®å›½å†…é•œåƒ

```bash
export ELECTRON_MIRROR="https://npmmirror.com/mirrors/electron/"
export ELECTRON_BUILDER_BINARIES_MIRROR="https://npmmirror.com/mirrors/electron-builder-binaries/"
```

### é—®é¢˜ 3ï¼šmacOS ä»£ç ç­¾åé—®é¢˜

- å½“å‰é…ç½®ï¼š`hardenedRuntime: true`, `entitlements: null`
- å¦‚éœ€é…ç½®ç­¾åï¼Œç¼–è¾‘ `electron-builder.json` çš„ `mac` å­—æ®µ

### é—®é¢˜ 4ï¼šæƒé™ä¸è¶³

```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x scripts/release.sh

# é‡æ–°è¿è¡Œ
bash scripts/release.sh
```

## ğŸ’¡ æœ€ä½³å®è·µ

### âœ… å‘ç‰ˆå‰æ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰ä»£ç å·²æäº¤åˆ° git
- [ ] ç‰ˆæœ¬å·å·²æ›´æ–°åˆ° 2.0.0ï¼ˆå·²å®Œæˆï¼‰
- [ ] CHANGELOG.md å·²æ›´æ–°ï¼ˆå·²å®Œæˆï¼‰
- [ ] æ„å»ºæµ‹è¯•é€šè¿‡ï¼š`npm run build`
- [ ] ç±»å‹æ£€æŸ¥é€šè¿‡ï¼š`npm run type-check`
- [ ] ä»£ç æ£€æŸ¥é€šè¿‡ï¼š`npm run lint`

### âœ… å‘ç‰ˆåéªŒè¯

- [ ] è®¿é—® GitHub Release é¡µé¢æ£€æŸ¥æ–‡ä»¶
- [ ] ä¸‹è½½å¹¶æµ‹è¯•å®‰è£…åŒ…
- [ ] æ£€æŸ¥æ›´æ–°åŠŸèƒ½æ˜¯å¦æ­£å¸¸

## ğŸ“ å¿«é€Ÿå‚è€ƒ

| å‘½ä»¤                                                        | è¯´æ˜                  |
| ----------------------------------------------------------- | --------------------- |
| `bash scripts/release.sh`                                   | ğŸš€ å…¨è‡ªåŠ¨å‘ç‰ˆï¼ˆæ¨èï¼‰ |
| `npm run build`                                             | æ„å»ºå‰ç«¯ä»£ç           |
| `npx electron-builder --mac`                                | æ‰“åŒ… macOS            |
| `npx electron-builder --win`                                | æ‰“åŒ… Windows          |
| `npx electron-builder --linux`                              | æ‰“åŒ… Linux            |
| `npx electron-builder --mac --win --linux --publish always` | æ‰“åŒ…å¹¶å‘å¸ƒæ‰€æœ‰å¹³å°    |

## ğŸ¯ é¢„æœŸç»“æœ

å‘ç‰ˆå®Œæˆåï¼Œä½ åº”è¯¥èƒ½åœ¨ä»¥ä¸‹ä½ç½®çœ‹åˆ° v2.0.0ï¼š

ğŸŒ **GitHub Release**: https://github.com/duobaobox/infinitynote/releases/tag/v2.0.0

ğŸ“¦ **å¯ä¸‹è½½æ–‡ä»¶**ï¼š

- `æ— é™ä¾¿ç­¾-2.0.0.dmg` (macOS Intel)
- `æ— é™ä¾¿ç­¾-2.0.0-arm64.dmg` (macOS Apple Silicon)
- `æ— é™ä¾¿ç­¾-2.0.0.exe` (Windows å®‰è£…ç¨‹åº)
- `æ— é™ä¾¿ç­¾-2.0.0-portable.exe` (Windows ä¾¿æºç‰ˆ)
- `æ— é™ä¾¿ç­¾-2.0.0.AppImage` (Linux)
- è¿˜æœ‰ `.deb`, `.rpm` ç­‰å…¶ä»–æ–‡ä»¶

---

**ç¥å‘ç‰ˆé¡ºåˆ©ï¼ğŸ‰**
