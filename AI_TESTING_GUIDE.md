# AI 便签生成功能测试指南

## 🚀 快速开始测试

### 1. 启动应用

```bash
npm run dev
```

打开浏览器访问: http://localhost:5173

### 2. 配置 AI 服务（必须）

#### 方法 A: 通过设置界面配置

1. 点击左上角设置按钮 ⚙️
2. 进入"AI 设置"标签页
3. 选择 AI 提供商（推荐：智谱 AI）
4. 输入 API 密钥
5. 点击"测试连接"验证
6. 保存设置

#### 方法 B: 手动配置（用于测试）

在浏览器控制台执行：

```javascript
// 配置智谱AI（推荐）
await aiService.configureProvider("zhipu", "YOUR_API_KEY_HERE");

// 或配置DeepSeek
await aiService.configureProvider("deepseek", "YOUR_API_KEY_HERE");
```

### 3. 基础功能测试

#### 测试 1: 创建 AI 便签

1. 在画布下方输入框输入提示词，例如：

   - "写一份今天的工作计划"
   - "总结 React Hooks 的用法"
   - "创建一个购物清单"

2. 观察按钮变化：

   - 无输入时：➕ 蓝色"创建空白便签"按钮
   - 有输入时：🤖 渐变色"AI 生成便签"按钮

3. 点击按钮开始生成

#### 测试 2: 观察流式生成

1. 输入较长的提示词："详细解释什么是人工智能，包括历史发展和应用场景"
2. 点击 AI 生成按钮
3. 观察：
   - 工作台底部显示生成预览
   - 便签中内容实时更新
   - 生成进度反馈

#### 测试 3: 错误处理

1. **空提示词测试**：不输入任何内容直接点击（应该创建空白便签）
2. **网络错误模拟**：断开网络后尝试生成
3. **API 密钥错误**：配置错误的密钥测试错误提示

#### 测试 4: 取消功能

1. 输入长文本提示词开始生成
2. 在生成过程中点击"停止生成"按钮
3. 验证生成确实停止

### 4. 高级功能测试

#### 测试 AI 便签编辑

1. 生成 AI 便签后，双击便签进入编辑模式
2. 修改内容，验证自动保存功能
3. 检查 AI 标识和元数据是否保留

#### 测试多便签并发

1. 快速创建多个 AI 便签
2. 观察是否能正确处理多个并发生成请求
3. 检查每个便签的内容是否正确对应

#### 测试思维链功能（如果支持）

1. 使用支持思维链的模型（如智谱 AI）
2. 输入复杂推理题："解释为什么 1+1=2"
3. 查看是否显示 AI 思维过程

### 5. 性能测试

#### 响应时间测试

```javascript
// 在浏览器控制台运行
const testPrompts = ["写一首短诗", "解释JavaScript闭包", "制作简单待办清单"];

for (let prompt of testPrompts) {
  console.time(prompt);
  // 手动触发生成，然后测量时间
  console.timeEnd(prompt);
}
```

#### 内存使用测试

1. 打开浏览器开发者工具 → Performance 标签
2. 开始录制
3. 连续生成 10 个 AI 便签
4. 停止录制，检查内存使用情况

### 6. 用户体验测试

#### 界面响应性

- [ ] 输入时按钮状态立即切换
- [ ] 生成过程中有明确的 loading 状态
- [ ] 错误信息友好且可操作
- [ ] 取消操作响应及时

#### 视觉反馈

- [ ] AI 便签与普通便签有视觉区分
- [ ] 流式生成过程动画流畅
- [ ] 状态指示器清晰易懂

### 7. 兼容性测试

#### 浏览器兼容性

- [ ] Chrome (推荐)
- [ ] Firefox
- [ ] Safari
- [ ] Edge

#### 设备测试

- [ ] 桌面端正常显示
- [ ] 平板适配良好
- [ ] 手机端可用（工作台响应式）

### 8. 故障排除

#### 常见问题解决

**问题 1: AI 生成失败**

```
解决方法：
1. 检查API密钥是否正确
2. 确认网络连接正常
3. 查看浏览器控制台错误信息
4. 尝试切换AI提供商
```

**问题 2: 生成速度慢**

```
原因分析：
- 网络延迟高
- AI服务商响应慢
- 提示词过于复杂

优化建议：
- 使用更简洁的提示词
- 尝试其他AI提供商
- 检查网络环境
```

**问题 3: 内容格式异常**

```
检查项目：
- Markdown转换是否正确
- HTML内容是否安全
- TipTap编辑器兼容性
```

### 9. 测试检查清单

#### 功能测试 ✅

- [ ] 基础 AI 生成功能
- [ ] 流式内容更新
- [ ] 错误处理机制
- [ ] 取消生成功能
- [ ] 不同类型内容生成（文本、列表、代码等）

#### 界面测试 ✅

- [ ] 按钮状态切换
- [ ] 加载状态显示
- [ ] 错误信息展示
- [ ] 响应式布局

#### 性能测试 ✅

- [ ] 生成速度合理（< 30 秒）
- [ ] 内存使用稳定
- [ ] 多便签并发处理
- [ ] 长时间使用稳定

#### 兼容性测试 ✅

- [ ] 主流浏览器支持
- [ ] 不同设备适配
- [ ] 网络异常恢复

### 10. 测试数据收集

#### 性能指标

- AI 响应时间：\_\_\_ 秒
- 流式延迟：\_\_\_ 毫秒
- 内容准确率：\_\_\_%
- 错误恢复率：\_\_\_%

#### 用户体验评分（1-10 分）

- 操作便捷性：\_\_\_
- 视觉反馈：\_\_\_
- 错误提示：\_\_\_
- 整体满意度：\_\_\_

---

## 🎯 测试完成标准

当所有以下条件满足时，AI 功能测试通过：

1. ✅ 所有基础功能正常工作
2. ✅ 错误处理完善且用户友好
3. ✅ 性能指标达到预期
4. ✅ 界面响应流畅
5. ✅ 兼容性测试通过
6. ✅ 无重大 bug 或崩溃

## 📞 技术支持

如果在测试过程中遇到问题，请：

1. 查看浏览器控制台错误信息
2. 检查网络连接和 API 配置
3. 参考本指南的故障排除部分
4. 记录问题详情和复现步骤

---

**祝测试顺利！** 🚀
